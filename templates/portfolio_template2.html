<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ name }} Â· Portfolio â€” Sidebar Grid</title>

    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
          crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    
    <link rel="stylesheet" href="{{ url_for('static', filename='css/template2.css') }}">
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">

        
        <aside class="col-12 col-lg-3 border-end bg-white">
          <div class="sidebar-wrapper d-flex flex-column justify-content-between position-sticky top-0 min-vh-100 p-4">
            <div>
              
              <div class="text-center mb-4">
                {% set sb_img = profile_img if profile_img else (url_for('static', filename='img/hero.jpg')) %}
                <img src="{{ sb_img }}"
                     alt="Profile" class="rounded-circle shadow-sm profile-pic"
                     onerror="this.src='https://picsum.photos/160'">
                <h1 class="h4 mt-3 mb-1">{{ name }}</h1>
                <p class="text-muted mb-0">{{ headline }}</p>
              </div>

              
              <div class="d-grid gap-2 mb-4">
                <a class="btn btn-primary" href="#projects"><i class="bi bi-kanban me-1"></i> Projects</a>
                {% set resume_link = resume_url or (contact.resume_url if contact else '') %}
                {% if resume_link %}
                <a class="btn btn-outline-secondary" href="{{ resume_link }}" target="_blank">
                  <i class="bi bi-download me-1"></i> Resume
                </a>
                {% endif %}
              </div>

              
              <div class="small text-muted">
                {% if contact and contact.email %}
                  <div class="mb-2"><i class="bi bi-envelope me-2 text-primary"></i> {{ contact.email }}</div>
                {% endif %}
                {% if contact and contact.location %}
                  <div class="mb-2"><i class="bi bi-geo-alt me-2 text-primary"></i> {{ contact.location }}</div>
                {% endif %}
                {% if contact and contact.linkedin %}
                  <div class="mb-2"><i class="bi bi-linkedin me-2 text-primary"></i> {{ contact.linkedin }}</div>
                {% endif %}
                {% if contact and contact.github %}
                  <div class="mb-2"><i class="bi bi-github me-2 text-primary"></i> {{ contact.github }}</div>
                {% endif %}
              </div>

              <hr class="my-4">

              <!-- Nav -->
              <nav class="nav flex-column">
                <a class="nav-link px-0" href="#overview"><i class="bi bi-house me-2"></i> Overview</a>
                <a class="nav-link px-0" href="#projects"><i class="bi bi-grid me-2"></i> Projects</a>
                <a class="nav-link px-0" href="{{ url_for('design') }}"><i class="bi bi-layout-text-sidebar-reverse me-2"></i> Choose another design</a>
              </nav>
            </div>

          </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="col-12 col-lg-9 p-4 p-lg-5">

          <!-- Overview -->
          <section id="overview" class="mb-5">
            <h2 class="h1 fw-semibold mb-3">Hello ðŸ‘‹</h2>
            <p class="lead text-muted">{{ overview }}</p>
          </section>

          <!-- Tag Filter -->
          <section class="mb-4">
            {% if all_tags %}
            <div class="d-flex flex-wrap align-items-center gap-2">
              <span class="me-2 text-muted">Filter:</span>

              <!-- IMPORTANT: point to template2_form (not template2) so the tag is preserved -->
              <a class="btn btn-sm {{ 'btn-primary' if not selected_tag else 'btn-outline-secondary' }}"
                 href="{{ url_for('template2_form') }}">All</a>

              {% for t in all_tags %}
                <a class="btn btn-sm {% if selected_tag == t %}btn-primary{% else %}btn-outline-secondary{% endif %}"
                   href="{{ url_for('template2_form', tag=t) }}">{{ t }}</a>
              {% endfor %}

              {% if selected_tag %}
                <a class="btn btn-sm btn-link" href="{{ url_for('template2_form') }}">Clear filter</a>
              {% endif %}
            </div>
            {% endif %}
          </section>

          <!-- Projects -->
          <section id="projects" class="mb-5">
            <div class="d-flex align-items-center justify-content-between mb-3">
              <h2 class="h1 fw-semibold mb-0">Projects</h2>
              {% if selected_tag %}
                <span class="text-muted small">Showing: <strong>{{ selected_tag }}</strong></span>
              {% endif %}
            </div>

            {% if projects %}
            <div class="row g-4">
              {% for p in projects %}
                <div class="col-12 col-md-6 col-xl-4">
                  <div class="card h-100 shadow-sm project-card">
                    {% set img_src =
                      (p.img if (p.img and '://' in p.img) else
                       (url_for('static', filename=p.img) if p.img else
                        url_for('static', filename='img/project' ~ loop.index ~ '.jpg'))) %}
                    <img class="card-img-top" src="{{ img_src }}"
                         alt="{{ p.title }}" onerror="this.src='https://picsum.photos/600/360?{{ loop.index }}'">
                    <div class="card-body d-flex flex-column">
                      <h5 class="card-title">{{ p.title }}</h5>
                      <p class="card-text text-muted">{{ p.desc }}</p>
                      <div class="mb-3">
                        {% for tag in p.tags %}
                          <span class="badge bg-primary-subtle text-primary me-1">{{ tag }}</span>
                        {% endfor %}
                      </div>
                      <div class="mt-auto d-flex gap-2">
                        <a href="{{ p.live or '#' }}" class="btn btn-sm btn-primary">Live</a>
                        <a href="{{ p.code or '#' }}" class="btn btn-sm btn-outline-secondary">GitHub</a>
                      </div>
                    </div>
                  </div>
                </div>
              {% endfor %}
            </div>
            {% else %}
              <div class="alert alert-info">
                {% if selected_tag %}
                  No projects found for tag <strong>{{ selected_tag }}</strong>.
                  <a href="{{ url_for('template2_form') }}" class="alert-link">Clear filter</a>.
                {% else %}
                  No projects to show yet.
                {% endif %}
              </div>
            {% endif %}
          </section>

          <footer class="pt-3 border-top">
            <small class="text-muted">Â© 2025 {{ name }}</small>
          </footer>
        </main>
      </div>
    </div>

    <!-- Bootstrap Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
  </body>
</html>
