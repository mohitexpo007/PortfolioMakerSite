<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ profile.name }} · Resume</title>

    <!-- Bootstrap CSS & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
          crossorigin="anonymous">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/template3.css') }}">
  </head>
  <body>
    <div class="container my-4 my-print-0">
      <!-- Header / Actions -->
      <div class="d-print-none d-flex justify-content-between align-items-center mb-3">
        <a class="btn btn-light" href="{{ url_for('design') }}">
          <i class="bi bi-layout-text-sidebar-reverse me-1"></i> Choose another design
        </a>
        <div class="d-flex gap-2">
          {% if profile.resume_url %}
          <a class="btn btn-outline-secondary" href="{{ profile.resume_url }}" target="_blank" rel="noopener">
            <i class="bi bi-download me-1"></i> Resume PDF
          </a>
          {% endif %}
          <button class="btn btn-primary" onclick="window.print()">
            <i class="bi bi-printer me-1"></i> Download PDF
          </button>
        </div>
      </div>

      <!-- Resume Card -->
      <div class="resume shadow-sm border rounded-3 p-4 p-lg-5 bg-white">
        <div class="row g-4">
          <!-- LEFT COLUMN -->
          <aside class="col-12 col-lg-4">
            <div class="text-center">
              {% set pf_img = profile.img if profile.img else url_for('static', filename='img/hero.jpg') %}
              <img class="rounded-circle shadow-sm profile-pic mb-3"
                   src="{{ pf_img }}"
                   alt="Profile photo"
                   onerror="this.src='https://picsum.photos/200'">
              <h1 class="h3 mb-1">{{ profile.name }}</h1>
              <p class="text-muted mb-3">{{ profile.role }}</p>
            </div>

            <!-- Contact -->
            <div class="mb-4">
              <h6 class="section-title">Contact</h6>
              <ul class="list-unstyled small mb-0">
                {% if profile.location %}
                  <li class="mb-2"><i class="bi bi-geo-alt text-primary me-2"></i>{{ profile.location }}</li>
                {% endif %}
                {% if profile.email %}
                  <li class="mb-2"><i class="bi bi-envelope text-primary me-2"></i>{{ profile.email }}</li>
                {% endif %}
                {% if profile.phone %}
                  <li class="mb-2"><i class="bi bi-telephone text-primary me-2"></i>{{ profile.phone }}</li>
                {% endif %}
                {% if profile.github %}
                  <li class="mb-2"><i class="bi bi-github text-primary me-2"></i>{{ profile.github }}</li>
                {% endif %}
                {% if profile.linkedin %}
                  <li class="mb-2"><i class="bi bi-linkedin text-primary me-2"></i>{{ profile.linkedin }}</li>
                {% endif %}
              </ul>
            </div>

            <!-- Skills -->
            {% if skills %}
            <div class="mb-4">
              <h6 class="section-title">Skills</h6>
              {% for s in skills %}
                <div class="mb-2">
                  <div class="d-flex justify-content-between">
                    <span class="small">{{ s.name }}</span>
                    <span class="small text-muted">{{ s.level }}%</span>
                  </div>
                  <div class="progress" style="height: 8px;">
                    <div
                      class="progress-bar"
                      role="progressbar"
                      style="--w: {{ s.level }}%;"
                      aria-valuemin="0"
                      aria-valuemax="100"
                      aria-valuenow="{{ s.level }}"
                    ></div>
                  </div>
                </div>
              {% endfor %}
            </div>
            {% endif %}

            <!-- Education -->
            {% if education %}
            <div class="mb-4">
              <h6 class="section-title">Education</h6>
              <ul class="list-unstyled small mb-0">
                {% for e in education %}
                  <li class="mb-2">
                    <strong>{{ e.degree }}</strong><br>
                    <span class="text-muted">
                      {{ e.inst }}{% if e.year %} · {{ e.year }}{% endif %}
                    </span>
                  </li>
                {% endfor %}
              </ul>
            </div>
            {% endif %}
          </aside>

          <!-- RIGHT COLUMN -->
          <main class="col-12 col-lg-8">
            {% if profile.summary %}
            <section class="mb-4">
              <h5 class="section-title">Profile</h5>
              <p class="text-muted mb-0">{{ profile.summary }}</p>
            </section>
            {% endif %}

            {% if experience %}
            <section class="mb-4">
              <h5 class="section-title">Experience</h5>
              <div class="timeline">
                {% for x in experience %}
                  <div class="timeline-item">
                    <div class="timeline-dot"></div>
                    <div class="timeline-content">
                      <div class="d-flex justify-content-between flex-wrap">
                        <h6 class="mb-0">
                          {{ x.title }}
                          {% if x.org %} · <span class="text-muted">{{ x.org }}</span>{% endif %}
                        </h6>
                        <small class="text-muted">
                          {{ x.start }}{% if x.end %} — {{ x.end }}{% endif %}
                        </small>
                      </div>
                      {% if x.bullets %}
                      <ul class="small text-muted mt-2 mb-0">
                        {% for b in x.bullets %}<li>{{ b }}</li>{% endfor %}
                      </ul>
                      {% endif %}
                    </div>
                  </div>
                {% endfor %}
              </div>
            </section>
            {% endif %}

            {% if projects %}
            <section class="mb-4">
              <h5 class="section-title">Selected Projects</h5>
              <div class="row g-3">
                {% for p in projects %}
                  <div class="col-12">
                    <div class="p-3 border rounded-3 d-flex flex-column flex-md-row align-items-md-center">
                      <div class="flex-fill">
                        <h6 class="mb-1">{{ p.name }}</h6>
                        <p class="text-muted small mb-2">{{ p.desc }}</p>
                      </div>
                      <div class="ms-md-3 d-flex gap-2">
                        {% if p.links.live %}<a class="btn btn-sm btn-primary" href="{{ p.links.live }}" target="_blank" rel="noopener">Live</a>{% endif %}
                        {% if p.links.report %}<a class="btn btn-sm btn-outline-secondary" href="{{ p.links.report }}" target="_blank" rel="noopener">Report</a>{% endif %}
                        {% if p.links.docs %}<a class="btn btn-sm btn-outline-secondary" href="{{ p.links.docs }}" target="_blank" rel="noopener">Docs</a>{% endif %}
                        {% if p.links.code %}<a class="btn btn-sm btn-outline-secondary" href="{{ p.links.code }}" target="_blank" rel="noopener">GitHub</a>{% endif %}
                      </div>
                    </div>
                  </div>
                {% endfor %}
              </div>
            </section>
            {% endif %}

            {% if achievements %}
            <section class="mb-2">
              <h5 class="section-title">Achievements</h5>
              <ul class="small text-muted mb-0">
                {% for a in achievements %}<li>{{ a }}</li>{% endfor %}
              </ul>
            </section>
            {% endif %}
          </main>
        </div>
      </div>

      <!-- Footer (screen only) -->
      <div class="d-print-none text-center text-muted small mt-3">
        © 2025 {{ profile.name }}
      </div>
    </div>

    <!-- Bootstrap Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
  </body>
</html>
